import{u as j,y as p,r as N,e as y,j as t,S as b,a as S,q as w,i as u,I as A,t as C,b as B,B as F,z as k,h as q,C as I,A as d}from"./index-DNg-2o6Y.js";import{M}from"./MovieCard-UFnnDEjG.js";import{u as P,q as $,T as E,M as x}from"./Message-DyVdwm-v.js";const R="_account__container_c1mlm_1",T="_account__title_c1mlm_5",L="_account__list_c1mlm_11",U="_account__item_c1mlm_15",a={account__container:R,account__title:T,account__list:L,account__item:U},_={"account-favorites__list":"_account-favorites__list_b9x1h_1","account-favorites__list-wrapper":"_account-favorites__list-wrapper_b9x1h_9","account-favorites__btn":"_account-favorites__btn_b9x1h_12","account-favorites__item":"_account-favorites__item_b9x1h_25"},v=()=>{const c=j(),{data:s,error:e,isSuccess:i,isPending:r,isError:l,refetch:m}=P({queryFn:()=>p(),queryKey:["favorite"],gcTime:0},$);N.useEffect(()=>{e&&c(y.add([e.message]))},[e,c]);const f=async()=>{await m(),i&&await c(w())};return t.jsx("div",{className:_["account-favorites"],children:t.jsxs("div",{className:_["account-favorites__list-container"],children:[r&&t.jsx(E,{className:_.genres__message}),i&&s&&t.jsx(b,{className:_["account-favorites__list-wrapper"],wrapperClass:_["account-favorites__list"],spaceBetween:40,slidesPerView:"auto",loop:!0,breakpoints:{567:{enabled:!1}},children:s.map(g=>t.jsx(S,{className:_["account-favorites__item"],children:t.jsx(M,{movie:g,isBtnRemoveFavorite:!0,handlers:{clickBtnRemoveFavorite:f}})},g.id))}),i&&s&&s.length==0&&t.jsx(x,{children:"Список избранных фильмов пуст."}),l&&t.jsx(x,{children:"Ошибка загрузки данных."})]})})},z="_icon_fe44e_50",n={"settings-item":"_settings-item_fe44e_1","settings-item__icon":"_settings-item__icon_fe44e_9","settings-item__icon-item":"_settings-item__icon-item_fe44e_18","settings-item__icon-text":"_settings-item__icon-text_fe44e_24","settings-item__icon-svg":"_settings-item__icon-svg_fe44e_29","settings-item__content":"_settings-item__content_fe44e_36","settings-item__name":"_settings-item__name_fe44e_40","settings-item__value":"_settings-item__value_fe44e_44",icon:z},h=({title:c,value:s,isIcon:e,io:i,svgName:r})=>t.jsxs("div",{className:u(n["settings-item"],{[n.icon]:e}),children:[t.jsxs("div",{className:n["settings-item__icon"],children:[t.jsx("span",{className:u(n["settings-item__icon-item"],n["settings-item__icon-text"]),children:i}),t.jsx(A,{className:u(n["settings-item__icon-item"],n["settings-item__icon-svg"]),name:r})]}),t.jsxs("div",{className:n["settings-item__content"],children:[t.jsx("span",{className:n["settings-item__name"],children:c}),t.jsx("span",{className:n["settings-item__value"],children:s})]})]}),o={"account-settings":"_account-settings_10jpn_1","account-settings__list":"_account-settings__list_10jpn_4","account-settings__item":"_account-settings__item_10jpn_9","account-settings__btn":"_account-settings__btn_10jpn_22"},D=()=>{const c=j(),s=C(),e=B(m=>m.user.profile),i=e?[e.name,e.surname].join(" "):"",r=e?`${String(e.name).charAt(0).toUpperCase()}${String(e.surname).charAt(0).toUpperCase()}`:"",l=()=>{c(k()),s("/")};return t.jsxs("div",{className:o["account-settings"],children:[t.jsxs("ul",{className:o["account-settings__list"],children:[t.jsx("li",{className:o["account-settings__item"],children:t.jsx(h,{title:"Имя Фамилия",value:i,io:r})}),t.jsx("li",{className:o["account-settings__item"],children:t.jsx(h,{title:"Электронная почта",value:(e==null?void 0:e.email)||"",isIcon:!0,svgName:"email"})})]}),t.jsx("div",{className:o["account-settings__btn-wrapper"],children:t.jsx(F,{className:o["account-settings__btn"],text:"Выйти из аккаунта",onClick:l})})]})},G=()=>{const{section:c}=q(),s=()=>{switch(c){case"favorites":return t.jsx(v,{});case"settings":return t.jsx(D,{});default:return t.jsx(v,{})}};return t.jsx("section",{className:a.account,"aria-label":"Аккаунт пользователя",children:t.jsxs(I,{className:a.account__container,children:[t.jsx("h2",{className:a.account__title,children:"Мой аккаунт"}),t.jsxs("ul",{className:a.account__list,children:[t.jsx("li",{className:a.account__item,children:t.jsx(d,{title:"Избранные фильмы",svg1:"like",onActive:!0,typeSecondary:!0,href:"/account/favorites"})}),t.jsx("li",{className:a.account__item,children:t.jsx(d,{title:"Настройка аккаунта",svg1:"login",onActive:!0,typeSecondary:!0,href:"/account/settings"})})]}),t.jsx("div",{className:a.account__content,children:s()})]})})},H=()=>t.jsx(G,{});export{H as default};
