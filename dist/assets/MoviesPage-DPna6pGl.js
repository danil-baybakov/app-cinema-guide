import{h as b,r as n,u as M,e as w,j as s,C as y,i as r,L as C,I as k,B as E,k as P}from"./index-DNg-2o6Y.js";import{M as q}from"./MovieCard-UFnnDEjG.js";import{g as S}from"./genres.image-Co7KGHwv.js";import{u as B,M as d,T as D,q as G}from"./Message-DyVdwm-v.js";const L="_movies__container_1x7so_1",T="_movies__title_1x7so_5",I="_movies__list_1x7so_26",R="_none_1x7so_42",A="_movies__card_1x7so_55",F="_movies__item_1x7so_76",K="_movies__btn_1x7so_37",e={movies__container:L,movies__title:T,"movies__title-icon":"_movies__title-icon_1x7so_11","movies__title-text":"_movies__title-text_1x7so_18","movies__title-item":"_movies__title-item_1x7so_23",movies__list:I,"movies__list-wrapper":"_movies__list-wrapper_1x7so_34","movies__btn-wrapper":"_movies__btn-wrapper_1x7so_37",none:R,movies__card:A,movies__item:F,"mobil-none":"_mobil-none_1x7so_76",movies__btn:K},Q=()=>{const{genre:_}=b(),[c,p]=n.useState(0),[i,u]=n.useState(null),l=M(),{data:t,error:a,isPending:v,isSuccess:x,isError:h}=B({queryKey:["movie","filter",_,c],queryFn:()=>P({genre:_,count:15,page:c})},G);n.useEffect(()=>{if(x&&t&&t.length>0){const m=[...i===null?[]:i,...t].sort((N,f)=>N.id-f.id);u(m)}},[t,x]),n.useEffect(()=>{a&&l(w.add([a.message]))},[a,l]);const j=_?S(_).genreRU:"",g=o=>{o.preventDefault(),p(m=>m+1)};return s.jsx("section",{className:e.movies,"aria-label":"Список фильмов",children:s.jsxs(y,{className:e.movies__container,children:[s.jsxs("div",{className:e.movies__title,children:[s.jsx("div",{className:r(e["movies__title-icon-wrapper"],e["movies__title-item"]),children:s.jsx(C,{className:e["movies__title-link"],to:"/genres",children:s.jsx(k,{className:e["movies__title-icon"],name:"chapter"})})}),s.jsx("h2",{className:r(e["movies__title-text"],e["movies__title-item"]),children:j})]}),i&&i.length>0&&s.jsx("div",{className:e["movies__list-container"],children:s.jsxs("div",{className:e["movies__list-wrapper"],children:[s.jsx("ul",{className:e.movies__list,children:i.map(o=>s.jsx("li",{className:e.movies__item,children:s.jsx(q,{className:e.movies__card,movie:o},o.id)},o.id))}),s.jsx("div",{className:r(e["movies__btn-wrapper"],{[e.none]:(t==null?void 0:t.length)===0}),children:s.jsx(E,{className:e.movies__btn,text:"Показать еще",type:"button",loading:v,onClick:g})})]})}),i&&i.length==0&&s.jsx(d,{children:"Список фильмов пуст."}),!i&&v&&s.jsx(D,{className:e.genres__message}),!i&&h&&s.jsx(d,{children:"Ошибка загрузки данных."})]})})},O=()=>s.jsx(Q,{});export{O as default};
